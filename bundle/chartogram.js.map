{"version":3,"file":"chartogram.js","sources":["../modules/utility.js","../modules/Timeline.js","../modules/Togglers.js","../modules/Tooltip.js","../modules/Chartogram.js","../modules/index.js"],"sourcesContent":["function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nexport function clearElement(element) {\n  while (element.firstChild) {\n    element.removeChild(element.firstChild);\n  }\n}\nexport function commaJoin(a, b) {\n  return a.map(function (ai, i) {\n    return \"\".concat(ai, \",\").concat(b[i]);\n  });\n}\nexport function getLowerSiblingDivisibleBy(n, divider) {\n  n = Math.floor(n);\n\n  while (true) {\n    if (n < divider) {\n      return divider;\n    }\n\n    if (n % divider === 0) {\n      return n;\n    }\n\n    n--;\n  }\n}\nexport function divideInterval(min, max, GAUGE_TICK_MARKS_COUNT) {\n  var points = new Array(GAUGE_TICK_MARKS_COUNT);\n  var i = 0;\n\n  while (i < GAUGE_TICK_MARKS_COUNT) {\n    points[i] = min + i * (max - min) / (GAUGE_TICK_MARKS_COUNT - 1);\n    i++;\n  }\n\n  return points;\n}\nexport function throttle(func, interval) {\n  var timeout;\n  var executedAt = 0;\n\n  var scheduled = function scheduled() {\n    timeout = undefined;\n    executedAt = Date.now();\n    func();\n  };\n\n  return function () {\n    var now = Date.now();\n    var remaining = interval - (now - executedAt);\n\n    if (remaining <= 0) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = undefined;\n      }\n\n      executedAt = now;\n      func();\n    } else if (!timeout) {\n      timeout = setTimeout(scheduled, remaining);\n    }\n  };\n}\nexport function simplifyGraph(x, y, maxPoints) {\n  var yMax = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Math.max.apply(Math, _toConsumableArray(y));\n  var threshold = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 0.025;\n  var i = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 0;\n\n  var _x = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : new Array(x.length);\n\n  var _y = arguments.length > 7 && arguments[7] !== undefined ? arguments[7] : new Array(x.length);\n\n  var _i = arguments.length > 8 && arguments[8] !== undefined ? arguments[8] : 0;\n\n  if (i + 2 > x.length - 1) {\n    while (i < y.length) {\n      _x[_i] = x[i];\n      _y[_i] = y[i];\n      _i++;\n      i++;\n    }\n\n    _x = _x.slice(0, _i);\n    _y = _y.slice(0, _i);\n\n    if (_x.length <= maxPoints) {\n      return [_x, _y];\n    } else {\n      if (x.length / _x.length < 1.1) {\n        threshold = Math.min(threshold + 0.025, 1);\n      }\n\n      return simplifyGraph(_x, _y, maxPoints, yMax, threshold);\n    }\n  }\n\n  var y0 = (y[i + 2] + y[i]) / 2;\n\n  if (Math.abs(y0 - y[i + 1]) / yMax < threshold) {\n    _x[_i] = x[i];\n    _x[_i + 1] = x[i + 2];\n    _y[_i] = y[i];\n    _y[_i + 1] = y[i + 2];\n    return simplifyGraph(x, y, maxPoints, yMax, threshold, i + 2, _x, _y, _i + 1);\n  } else {\n    _x[_i] = x[i];\n    _x[_i + 1] = x[i + 1];\n    _x[_i + 2] = x[i + 2];\n    _y[_i] = y[i];\n    _y[_i + 1] = y[i + 1];\n    _y[_i + 2] = y[i + 2];\n    return simplifyGraph(x, y, maxPoints, yMax, threshold, i + 2, _x, _y, _i + 2);\n  }\n}\nexport function setUpDrag(element, onDragStart, onDrag) {\n  function onTouchMove(event) {\n    onDrag(event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n  }\n\n  function onPointerMove(event) {\n    onDrag(event.clientX, event.clientY);\n  }\n\n  function onDragStop() {\n    window.removeEventListener('pointermove', onPointerMove);\n    window.removeEventListener('touchmove', onTouchMove);\n    window.removeEventListener('pointerup', onDragStop);\n    window.removeEventListener('pointercancel', onDragStop);\n    window.removeEventListener('touchend', onDragStop);\n    window.removeEventListener('touchcancel', onDragStop);\n  }\n\n  function onTouchStart(event) {\n    // Ignore multitouch.\n    if (event.touches.length > 1) {\n      // Reset.\n      return onDragStop();\n    }\n\n    onDragStart(event.changedTouches[0].clientX, event.changedTouches[0].clientY);\n    window.addEventListener('touchmove', onTouchMove);\n    window.addEventListener('touchend', onDragStop);\n    window.addEventListener('touchcancel', onDragStop);\n  } // Safari doesn't support pointer events.\n  // https://caniuse.com/#feat=pointer\n\n\n  element.addEventListener('touchstart', onTouchStart);\n\n  function onPointerDown(event) {\n    onDragStart(event.clientX, event.clientY);\n    window.addEventListener('pointermove', onPointerMove);\n    window.addEventListener('pointerup', onDragStop);\n    window.addEventListener('pointercancel', onDragStop);\n  }\n\n  element.addEventListener('pointerdown', onPointerDown);\n  return function () {\n    onDragStop();\n    element.removeEventListener(onPointerDown);\n    element.removeEventListener(onTouchStart);\n  };\n}\nexport function setUpTouchMove(element, _onTrackStart, _onTrack, _onTrackStop) {\n  var elementBounds;\n\n  function onTrack(x, y) {\n    _onTrack(x, y, elementBounds);\n  }\n\n  function onTrackStart() {\n    elementBounds = element.getBoundingClientRect();\n\n    _onTrackStart();\n  }\n\n  function onTouchStart(event) {\n    // Ignore multitouch.\n    if (event.touches.length > 1) {\n      // Reset.\n      return onTrackStop();\n    }\n\n    onTrackStart();\n    element.addEventListener('touchend', onTrackStop);\n    element.addEventListener('touchmove', onTouchMove);\n    element.addEventListener('touchend', onTrackStop);\n    element.addEventListener('touchcancel', onTrackStop);\n    onTouchMove(event);\n  } // Safari doesn't support pointer events.\n  // https://caniuse.com/#feat=pointer\n\n\n  element.addEventListener('touchstart', onTouchStart);\n\n  function onTouchMove(event) {\n    var x = event.changedTouches[0].clientX;\n    var y = event.changedTouches[0].clientY; // Emulate 'pointerleave' behavior.\n\n    if (x < elementBounds.left || x > elementBounds.left + elementBounds.width || y < elementBounds.top || y > elementBounds.top + elementBounds.height) {\n      onTrackStop();\n    } else {\n      onTrack(x, y);\n    }\n  }\n\n  function onPointerMove(event) {\n    onTrack(event.clientX, event.clientY);\n  }\n\n  function onTrackStop() {\n    element.removeEventListener('pointermove', onPointerMove);\n    element.removeEventListener('pointerleave', onTrackStop);\n    element.removeEventListener('pointercancel', onTrackStop);\n    element.removeEventListener('touchmove', onTouchMove);\n    element.removeEventListener('touchend', onTrackStop);\n    element.removeEventListener('touchcancel', onTrackStop);\n\n    _onTrackStop();\n  }\n\n  function onPointerEnter() {\n    onTrackStart();\n    element.addEventListener('pointermove', onPointerMove);\n    element.addEventListener('pointerleave', onTrackStop);\n    element.addEventListener('pointercancel', onTrackStop);\n  }\n\n  element.addEventListener('pointerenter', onPointerEnter);\n  return function () {\n    onTrackStop();\n    element.removeEventListener(onPointerEnter);\n    element.removeEventListener(onTouchStart);\n  };\n}\n//# sourceMappingURL=utility.js.map","function _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { clearElement, commaJoin, simplifyGraph, throttle, setUpDrag } from './utility';\nvar TIMELINE_GRAPH_MAX_POINTS = 80;\nvar SVG_XMLNS = 'http://www.w3.org/2000/svg';\n\nvar Timeline =\n/*#__PURE__*/\nfunction () {\n  function Timeline(props) {\n    var _this = this;\n\n    _classCallCheck(this, Timeline);\n\n    _defineProperty(this, \"onResize\", function (event) {\n      _this.setState({\n        aspectRatio: _this.getCanvasAspectRatio()\n      });\n    });\n\n    _defineProperty(this, \"onResizeThrottled\", throttle(this.onResize, 33));\n\n    _defineProperty(this, \"setState\", function (newState) {\n      if (newState.aspectRatio !== _this.state.aspectRatio) {\n        _this.updateAspectRatio(newState.aspectRatio);\n      }\n\n      _this.state = _objectSpread({}, _this.state, newState);\n\n      _this.render();\n    });\n\n    _defineProperty(this, \"mapX\", function (x) {\n      var _this$props = _this.props,\n          canvasWidth = _this$props.canvasWidth,\n          data = _this$props.data;\n      var minX = data.minX,\n          maxX = data.maxX;\n      return (x - minX) / (maxX - minX) * canvasWidth;\n    });\n\n    _defineProperty(this, \"mapY\", function (y) {\n      var _this$props2 = _this.props,\n          canvasWidth = _this$props2.canvasWidth,\n          minY = _this$props2.minY,\n          maxY = _this$props2.maxY;\n      var aspectRatio = _this.state.aspectRatio;\n      return (y - minY) / (maxY - minY) * canvasWidth / aspectRatio;\n    });\n\n    _defineProperty(this, \"setUpTimelineWindowHandle\", function (side) {\n      var handle = side === 'left' ? _this.timelineWindowLeftHandle : _this.timelineWindowRightHandle;\n      var handleWidth = parseFloat(getComputedStyle(_this.timelineWindow).borderLeftWidth);\n      var timelineCoordinates;\n      var minX;\n      var maxX;\n      var deltaX;\n      var startedX;\n\n      var onDrag = function onDrag(x) {\n        x -= deltaX;\n        x = Math.max(Math.min(x, maxX), minX);\n        var ratio = (x - timelineCoordinates.left) / timelineCoordinates.width;\n\n        if (side === 'left') {\n          _this.updateBounds(ratio, _this.props.toRatio);\n        } else {\n          _this.updateBounds(_this.props.fromRatio, ratio);\n        }\n      };\n\n      var onDragStart = function onDragStart(x) {\n        timelineCoordinates = _this.timeline.getBoundingClientRect();\n\n        var timelineWindowCoordinates = _this.timelineWindow.getBoundingClientRect();\n\n        if (side === 'left') {\n          minX = timelineCoordinates.left;\n          maxX = timelineWindowCoordinates.left + timelineWindowCoordinates.width - 2 * handleWidth;\n          deltaX = x - timelineWindowCoordinates.left;\n        } else {\n          minX = timelineWindowCoordinates.left + 2 * handleWidth;\n          maxX = timelineCoordinates.left + timelineCoordinates.width;\n          deltaX = x - (timelineWindowCoordinates.left + timelineWindowCoordinates.width);\n        }\n      };\n\n      return setUpDrag(handle, onDragStart, onDrag);\n    });\n\n    _defineProperty(this, \"setUpTimelineWindow\", function () {\n      var timelineCoordinates;\n      var timelineWindowCoordinates;\n      var minX;\n      var maxX;\n      var innerX;\n\n      var onDrag = function onDrag(x) {\n        x -= innerX;\n        x = Math.max(Math.min(x, maxX), minX);\n        var ratio = (x - timelineCoordinates.left) / timelineCoordinates.width;\n\n        _this.updateBounds(ratio, ratio + timelineWindowCoordinates.width / timelineCoordinates.width);\n      };\n\n      var onDragStart = function onDragStart(x) {\n        timelineCoordinates = _this.timeline.getBoundingClientRect();\n        timelineWindowCoordinates = _this.timelineWindow.getBoundingClientRect();\n        innerX = x - timelineWindowCoordinates.left;\n        minX = timelineCoordinates.left;\n        maxX = timelineCoordinates.left + (timelineCoordinates.width - timelineWindowCoordinates.width);\n      };\n\n      return setUpDrag(_this.timelineWindowDrag, onDragStart, onDrag);\n    });\n\n    _defineProperty(this, \"setTimelineWindowLeft\", function (ratio) {\n      _this.timelineOverlayLeft.style.right = \"\".concat(100 * (1 - ratio), \"%\");\n      _this.timelineWindow.style.left = \"\".concat(100 * ratio, \"%\");\n    });\n\n    _defineProperty(this, \"setTimelineWindowRight\", function (ratio) {\n      _this.timelineOverlayRight.style.left = \"\".concat(100 * ratio, \"%\");\n      _this.timelineWindow.style.right = \"\".concat(100 * (1 - ratio), \"%\");\n    });\n\n    this.props = props;\n  }\n\n  _createClass(Timeline, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(props) {\n      if (this.props !== props) {\n        this.props = props;\n        this.state = {\n          aspectRatio: this.getCanvasAspectRatio()\n        };\n        this.onChangeBounds(this.props.fromRatio, this.props.toRatio), this.render();\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var rootNode = this.props.rootNode;\n      this.timeline = rootNode.querySelector('.chartogram__timeline');\n      this.timelineOverlayLeft = rootNode.querySelector('.chartogram__timeline-overlay-left');\n      this.timelineWindowLeftHandle = rootNode.querySelector('.chartogram__timeline-window__left-handle');\n      this.timelineWindow = rootNode.querySelector('.chartogram__timeline-window');\n      this.timelineWindowDrag = rootNode.querySelector('.chartogram__timeline-window__drag');\n      this.timelineWindowRightHandle = rootNode.querySelector('.chartogram__timeline-window__right-handle');\n      this.timelineOverlayRight = rootNode.querySelector('.chartogram__timeline-overlay-right');\n      this.timelineCanvas = rootNode.querySelector('.chartogram__timeline-canvas');\n      this.state = {\n        aspectRatio: this.getCanvasAspectRatio()\n      };\n      this.updateAspectRatio();\n      this.setUpTimelineWindowHandle('left');\n      this.setUpTimelineWindowHandle('right');\n      this.setUpTimelineWindow(); // Add window resize event listener.\n\n      window.addEventListener('resize', this.onResizeThrottled);\n      this.onChangeBounds(this.props.fromRatio, this.props.toRatio);\n      this.mountGraphs();\n      this.render();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      // Remove window resize event listener.\n      window.removeEventListener('resize', this.onResizeThrottled);\n    }\n  }, {\n    key: \"updateAspectRatio\",\n    value: function updateAspectRatio() {\n      var aspectRatio = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.aspectRatio;\n      var _this$props3 = this.props,\n          canvasWidth = _this$props3.canvasWidth,\n          fixSvgCoordinate = _this$props3.fixSvgCoordinate; // Set canvas `viewBox`.\n\n      this.timelineCanvas.setAttribute('viewBox', \"0 0 \".concat(canvasWidth, \" \").concat(fixSvgCoordinate(canvasWidth / aspectRatio)));\n    }\n  }, {\n    key: \"getCanvasAspectRatio\",\n    value: function getCanvasAspectRatio() {\n      var timelineCanvasDimensions = this.timelineCanvas.getBoundingClientRect();\n      return timelineCanvasDimensions.width / timelineCanvasDimensions.height;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$props4 = this.props,\n          y = _this$props4.y,\n          data = _this$props4.data,\n          graphOpacity = _this$props4.graphOpacity; // Update graphs.\n\n      var i = 0;\n\n      var _loop = function _loop() {\n        var _data$y$i = data.y[i],\n            id = _data$y$i.id,\n            points = _data$y$i.points,\n            color = _data$y$i.color;\n        var isShown = y.find(function (_) {\n          return _.id === id;\n        }).isShown;\n        var opacity = graphOpacity[i]; // Update graph.\n\n        if (isShown || opacity > 0) {\n          var _simplifyGraph = simplifyGraph(data.x.points, points, TIMELINE_GRAPH_MAX_POINTS),\n              _simplifyGraph2 = _slicedToArray(_simplifyGraph, 2),\n              _x = _simplifyGraph2[0],\n              _y = _simplifyGraph2[1];\n\n          if (_this2.graphs[i]) {\n            _this2.updateGraph(i, _x, _y, opacity);\n          } else {\n            _this2.mountGraph(i, _x, _y, color, opacity);\n          }\n        } else if (_this2.graphs[i]) {\n          _this2.unmountGraph(i);\n        }\n\n        i++;\n      };\n\n      while (i < data.y.length) {\n        _loop();\n      }\n    }\n  }, {\n    key: \"renderGraph\",\n    value: function renderGraph(x, y, color) {\n      var opacity = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 1;\n      var graph = document.createElementNS(SVG_XMLNS, 'polyline');\n      graph.setAttribute('stroke', color);\n      this.updateGraph(graph, x, y, opacity);\n      graph.classList.add('chartogram__graph');\n      return graph;\n    }\n  }, {\n    key: \"mountGraphs\",\n    value: function mountGraphs() {\n      var _this3 = this;\n\n      this.graphs = [];\n      var data = this.props.data;\n      data.y.forEach(function (_ref, i) {\n        var points = _ref.points,\n            color = _ref.color;\n\n        _this3.mountGraph(i, data.x.points, points, color);\n      });\n    }\n  }, {\n    key: \"mountGraph\",\n    value: function mountGraph(i, x, y, color, opacity) {\n      var graph = this.renderGraph(x, y, color, opacity);\n      this.graphs[i] = graph;\n      this.timelineCanvas.appendChild(graph);\n    }\n  }, {\n    key: \"unmountGraph\",\n    value: function unmountGraph(i) {\n      this.timelineCanvas.removeChild(this.graphs[i]);\n      this.graphs[i] = undefined;\n    }\n  }, {\n    key: \"updateGraph\",\n    value: function updateGraph(graph, x, y, opacity) {\n      var _this4 = this;\n\n      var _this$props5 = this.props,\n          maxY = _this$props5.maxY,\n          createPolylinePoints = _this$props5.createPolylinePoints;\n\n      if (typeof graph === 'number') {\n        graph = this.graphs[graph];\n      }\n\n      graph.setAttribute('points', createPolylinePoints(x.map(this.mapX), y.map(function (y) {\n        return _this4.mapY(maxY - y);\n      })).join(' '));\n\n      if (opacity !== 1) {\n        graph.style.opacity = opacity;\n      }\n    }\n  }, {\n    key: \"onChangeBounds\",\n    value: function onChangeBounds(from, to) {\n      this.setTimelineWindowLeft(from);\n      this.setTimelineWindowRight(to);\n    }\n  }, {\n    key: \"updateBounds\",\n    value: function updateBounds(from, to) {\n      this.props.onChangeBounds(from, to);\n      this.props.fromRatio = from;\n      this.props.toRatio = to;\n      this.onChangeBounds(from, to);\n    }\n  }]);\n\n  return Timeline;\n}();\n\nexport { Timeline as default };\nTimeline.INITIAL_MARKUP = \"\\n\\t<div class=\\\"chartogram__timeline\\\">\\n\\t\\t<div class=\\\"chartogram__timeline-canvas-padding\\\">\\n\\t\\t\\t<svg class=\\\"chartogram__timeline-canvas\\\" preserveAspectRatio=\\\"none\\\"></svg>\\n\\t\\t</div>\\n\\t\\t<div class=\\\"chartogram__timeline-overlay-left\\\"></div>\\n\\t\\t<div class=\\\"chartogram__timeline-overlay-right\\\"></div>\\n\\t\\t<div class=\\\"chartogram__timeline-window\\\">\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"chartogram__reset-button chartogram__timeline-window__drag\\\"></button>\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"chartogram__reset-button chartogram__timeline-window__left-handle\\\"></button>\\n\\t\\t\\t<button type=\\\"button\\\" class=\\\"chartogram__reset-button chartogram__timeline-window__right-handle\\\"></button>\\n\\t\\t</div>\\n\\t</div>\\n\";\n//# sourceMappingURL=Timeline.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { clearElement } from './utility';\n\nvar Togglers =\n/*#__PURE__*/\nfunction () {\n  function Togglers(props) {\n    var _this = this;\n\n    _classCallCheck(this, Togglers);\n\n    _defineProperty(this, \"createGraphToggler\", function (_ref) {\n      var id = _ref.id,\n          name = _ref.name,\n          color = _ref.color;\n      var toggler = document.createElement('button');\n      toggler.setAttribute('type', 'button');\n      toggler.classList.add('chartogram__chart-toggler');\n      toggler.classList.add('chartogram__chart-toggler--on');\n      toggler.classList.add('chartogram__reset-button'); // Add check.\n\n      var xmlns = 'http://www.w3.org/2000/svg';\n      var check = document.createElementNS(xmlns, 'svg');\n      check.setAttribute('viewBox', '0 0 19 19');\n      check.setAttribute('class', 'chartogram__chart-toggler-check'); // Add background circle.\n\n      var backgroundCircle = document.createElementNS(xmlns, 'circle');\n      backgroundCircle.setAttribute('cx', '9.5');\n      backgroundCircle.setAttribute('cy', '9.5');\n      backgroundCircle.setAttribute('r', '9.5');\n      backgroundCircle.setAttribute('fill', color);\n      check.appendChild(backgroundCircle); // Add check circle.\n\n      var checkCircle = document.createElementNS(xmlns, 'circle');\n      checkCircle.setAttribute('cx', '9.5');\n      checkCircle.setAttribute('cy', '9.5');\n      checkCircle.setAttribute('r', '8');\n      checkCircle.setAttribute('class', 'chartogram__chart-toggler-check-circle');\n      check.appendChild(checkCircle); // Add check mark.\n\n      var checkMark = document.createElementNS(xmlns, 'path');\n      checkMark.setAttribute('d', 'M13.64 4.94l-6.2 6.34-1.69-1.9c-.73-.63-1.89.1-1.36 1.06l2 3.38c.3.43 1.04.85 1.78 0 .32-.42 6.31-7.93 6.31-7.93.74-.84-.2-1.58-.84-.95z');\n      checkMark.setAttribute('fill', 'white');\n      checkMark.setAttribute('class', 'chartogram__chart-toggler-check-mark');\n      check.appendChild(checkMark); // Add checkmark.\n\n      toggler.appendChild(check); // Add graph name.\n\n      toggler.appendChild(document.createTextNode(name)); // On click.\n\n      toggler.addEventListener('click', function () {\n        return _this.onToggle(id, toggler);\n      });\n      return toggler;\n    });\n\n    _defineProperty(this, \"onToggle\", function (id, toggler) {\n      var onToggle = _this.props.onToggle;\n\n      if (onToggle(id)) {\n        toggler.classList.toggle('chartogram__chart-toggler--on');\n      }\n    });\n\n    this.props = props;\n  }\n\n  _createClass(Togglers, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this$props = this.props,\n          rootNode = _this$props.rootNode,\n          data = _this$props.data; // Add graph togglers.\n\n      var graphTogglers = rootNode.querySelector('.chartogram__chart-togglers');\n      clearElement(graphTogglers);\n\n      for (var _iterator = data.y, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref2 = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref2 = _i.value;\n        }\n\n        var y = _ref2;\n        graphTogglers.appendChild(this.createGraphToggler(y));\n      }\n    }\n  }]);\n\n  return Togglers;\n}();\n\nexport { Togglers as default };\nTogglers.INITIAL_MARKUP = \"\\n\\t<div class=\\\"chartogram__chart-togglers\\\"></div>\\n\";\n//# sourceMappingURL=Togglers.js.map","function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { setUpTouchMove } from './utility';\nvar SVG_XMLNS = 'http://www.w3.org/2000/svg';\n\nvar Tooltip =\n/*#__PURE__*/\nfunction () {\n  function Tooltip(props) {\n    var _this = this;\n\n    _classCallCheck(this, Tooltip);\n\n    _defineProperty(this, \"setUpListener\", function () {\n      var canvas = _this.props.canvas;\n      setUpTouchMove(canvas, function () {}, _this.onTrack, function () {\n        return _this.unmount();\n      });\n    });\n\n    _defineProperty(this, \"onTrack\", function (screenX, screenY, canvasDimensions) {\n      var _this$props = _this.props,\n          minX = _this$props.minX,\n          maxX = _this$props.maxX,\n          xPoints = _this$props.xPoints;\n      var xScreenRatio = (screenX - canvasDimensions.left) / canvasDimensions.width;\n      var xPoint = minX + xScreenRatio * (maxX - minX);\n      var xHigherIndex = xPoints.findIndex(function (_) {\n        return _ >= xPoint;\n      });\n      var xLowerIndex = xHigherIndex - 1;\n\n      if (xHigherIndex < 0 || xHigherIndex >= xPoints.length) {\n        xHigherIndex = -1;\n      }\n\n      if (xLowerIndex < 0 || xLowerIndex >= xPoints.length) {\n        xLowerIndex = -1;\n      }\n\n      var xIndex;\n\n      if (xHigherIndex < 0) {\n        if (xLowerIndex < 0) {\n          return _this.unmount();\n        } else {\n          xIndex = xLowerIndex;\n        }\n      } else {\n        if (xLowerIndex < 0) {\n          xIndex = xHigherIndex;\n        } else {\n          var xLower = xPoints[xLowerIndex];\n          var xHigher = xPoints[xHigherIndex];\n          var deltaLower = xPoint - xLower;\n          var deltaHigher = xHigher - xPoint;\n          xIndex = deltaLower > deltaHigher ? xHigherIndex : xLowerIndex;\n        }\n      }\n\n      var x = xPoints[xIndex];\n\n      if (x !== _this.tooltipForX) {\n        _this.tooltipForX = x;\n\n        if (!_this.tooltip) {\n          _this.mount();\n        }\n\n        _this.updateTooltip(x, xIndex, canvasDimensions.width);\n      }\n    });\n\n    _defineProperty(this, \"unmountLine\", function () {\n      var canvas = _this.props.canvas;\n      canvas.removeChild(_this.line);\n      _this.line = undefined;\n    });\n\n    _defineProperty(this, \"mountPoints\", function () {\n      var pointsContainer = _this.props.pointsContainer;\n      _this.points = _this.renderPoints();\n\n      for (var _iterator = _this.points, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var point = _ref;\n        pointsContainer.appendChild(point);\n      }\n    });\n\n    _defineProperty(this, \"unmountPoints\", function () {\n      var pointsContainer = _this.props.pointsContainer;\n\n      for (var _iterator2 = _this.points, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) break;\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) break;\n          _ref2 = _i2.value;\n        }\n\n        var point = _ref2;\n        pointsContainer.removeChild(point);\n      }\n\n      _this.points = undefined;\n    });\n\n    _defineProperty(this, \"updateLinePosition\", function (x) {\n      if (!_this.isLineRendered()) {\n        _this.mountLine();\n      }\n\n      var _this$props2 = _this.props,\n          canvasWidth = _this$props2.canvasWidth,\n          aspectRatio = _this$props2.aspectRatio,\n          fixSvgCoordinate = _this$props2.fixSvgCoordinate,\n          mapX = _this$props2.mapX;\n\n      _this.line.setAttributeNS(null, 'x1', fixSvgCoordinate(mapX(x)));\n\n      _this.line.setAttributeNS(null, 'x2', fixSvgCoordinate(mapX(x)));\n\n      _this.line.setAttributeNS(null, 'y1', 0);\n\n      _this.line.setAttributeNS(null, 'y2', fixSvgCoordinate(canvasWidth / aspectRatio));\n    });\n\n    _defineProperty(this, \"updatePointPositions\", function (xIndex, xRatio) {\n      var _this$props3 = _this.props,\n          maxY = _this$props3.maxY,\n          y = _this$props3.y;\n      var i = 0;\n      var j = 0;\n\n      while (i < y.length) {\n        if (y[i].isShown) {\n          var point = _this.points[j];\n          var _y = y[i].points[xIndex];\n          var yRatio = _y / maxY;\n          point.style.left = \"\".concat(xRatio * 100, \"%\");\n          point.style.bottom = \"\".concat(yRatio * 100, \"%\");\n          j++;\n        }\n\n        i++;\n      }\n    });\n\n    this.props = props;\n  }\n\n  _createClass(Tooltip, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.unlisten = this.setUpListener();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.unlisten();\n      this.unmount();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(props) {\n      if (this.props !== props) {\n        this.props = props;\n      }\n    }\n  }, {\n    key: \"mount\",\n    value: function mount() {\n      var container = this.props.container;\n      this.tooltip = this.renderTooltip();\n      container.appendChild(this.tooltip);\n      this.mountPoints();\n\n      if (!this.isLineRendered()) {\n        this.mountLine();\n      }\n    }\n  }, {\n    key: \"unmount\",\n    value: function unmount() {\n      if (!this.tooltip) {\n        return;\n      }\n\n      var container = this.props.container;\n      this.tooltipForX = undefined;\n      container.removeChild(this.tooltip);\n      this.tooltip = undefined;\n      this.unmountPoints();\n\n      if (this.isLineRendered()) {\n        this.unmountLine();\n      }\n    }\n  }, {\n    key: \"mountLine\",\n    value: function mountLine() {\n      var canvas = this.props.canvas;\n      this.line = this.renderLine();\n      canvas.insertBefore(this.line, canvas.querySelector('polyline'));\n    }\n  }, {\n    key: \"renderTooltip\",\n    value: function renderTooltip() {\n      var y = this.props.y; // Create tooltip.\n\n      var tooltip = document.createElement('div');\n      tooltip.classList.add('chartogram__tooltip'); // Add tooltip title.\n\n      var tooltipDate = document.createElement('h1');\n      tooltipDate.classList.add('chartogram__tooltip-header');\n      tooltip.appendChild(tooltipDate); // Add graph values.\n\n      var tooltipValues = document.createElement('dl');\n      tooltipValues.classList.add('chartogram__tooltip-values');\n      tooltip.appendChild(tooltipValues); // Add graph values.\n\n      for (var _iterator3 = y, _isArray3 = Array.isArray(_iterator3), _i3 = 0, _iterator3 = _isArray3 ? _iterator3 : _iterator3[Symbol.iterator]();;) {\n        var _ref3;\n\n        if (_isArray3) {\n          if (_i3 >= _iterator3.length) break;\n          _ref3 = _iterator3[_i3++];\n        } else {\n          _i3 = _iterator3.next();\n          if (_i3.done) break;\n          _ref3 = _i3.value;\n        }\n\n        var _ref4 = _ref3,\n            isShown = _ref4.isShown,\n            color = _ref4.color;\n\n        if (isShown) {\n          // Add graph value.\n          var tooltipValue = document.createElement('dt');\n          tooltipValue.style.color = color;\n          tooltipValues.appendChild(tooltipValue); // Add graph name.\n\n          var tooltipName = document.createElement('dd');\n          tooltipName.style.color = color;\n          tooltipValues.appendChild(tooltipName);\n        }\n      }\n\n      return tooltip;\n    }\n  }, {\n    key: \"renderLine\",\n    value: function renderLine() {\n      var line = document.createElementNS(SVG_XMLNS, 'line');\n      line.setAttribute('class', 'chartogram__tooltip-line');\n      return line;\n    }\n  }, {\n    key: \"isLineRendered\",\n    value: function isLineRendered() {\n      var canvas = this.props.canvas;\n      return this.line && this.line.parentNode === canvas;\n    }\n  }, {\n    key: \"renderPoints\",\n    value: function renderPoints() {\n      var points = [];\n      var _this$props4 = this.props,\n          pointsContainer = _this$props4.pointsContainer,\n          y = _this$props4.y;\n\n      for (var _iterator4 = y, _isArray4 = Array.isArray(_iterator4), _i4 = 0, _iterator4 = _isArray4 ? _iterator4 : _iterator4[Symbol.iterator]();;) {\n        var _ref5;\n\n        if (_isArray4) {\n          if (_i4 >= _iterator4.length) break;\n          _ref5 = _iterator4[_i4++];\n        } else {\n          _i4 = _iterator4.next();\n          if (_i4.done) break;\n          _ref5 = _i4.value;\n        }\n\n        var _y = _ref5;\n\n        if (_y.isShown) {\n          var point = document.createElement('div');\n          point.classList.add('chartogram__tooltip-point');\n          point.style.color = _y.color;\n          points.push(point);\n          pointsContainer.appendChild(point);\n        }\n      }\n\n      return points;\n    }\n  }, {\n    key: \"updateTooltip\",\n    value: function updateTooltip(x, xIndex, canvasWidth) {\n      var _this$props5 = this.props,\n          minX = _this$props5.minX,\n          maxX = _this$props5.maxX;\n      var xRatio = (x - minX) / (maxX - minX);\n      this.updateTooltipDate(new Date(x));\n      this.updateTooltipValues(xIndex);\n      this.updateTooltipPosition(xRatio, canvasWidth);\n      this.updatePointPositions(xIndex, xRatio);\n      this.updateLinePosition(x);\n    }\n  }, {\n    key: \"updateTooltipPosition\",\n    value: function updateTooltipPosition(xRatio, canvasWidth) {\n      var _this$props6 = this.props,\n          tooltipShift = _this$props6.tooltipShift,\n          maxOverflow = _this$props6.maxOverflow;\n      var left = xRatio * canvasWidth;\n      left -= tooltipShift === undefined ? 40 : tooltipShift;\n      var tooltipWidth = this.tooltip.getBoundingClientRect().width;\n      var overflow = maxOverflow === undefined ? 5 : maxOverflow;\n\n      if (left < -1 * overflow) {\n        left = -1 * overflow;\n      } else if (left + tooltipWidth > canvasWidth + overflow) {\n        left = canvasWidth + overflow - tooltipWidth;\n      }\n\n      this.tooltip.style.left = left + 'px';\n    }\n  }, {\n    key: \"updateTooltipDate\",\n    value: function updateTooltipDate(date) {\n      var _this$props7 = this.props,\n          weekdays = _this$props7.weekdays,\n          months = _this$props7.months;\n      var tooltipDate = this.tooltip.childNodes[0];\n      tooltipDate.textContent = \"\".concat(weekdays[date.getDay()], \", \").concat(months[date.getMonth()], \" \").concat(date.getDate());\n    }\n  }, {\n    key: \"updateTooltipValues\",\n    value: function updateTooltipValues(xIndex) {\n      var y = this.props.y;\n      var tooltipValues = this.tooltip.childNodes[1];\n      var i = 0;\n\n      for (var _iterator5 = y, _isArray5 = Array.isArray(_iterator5), _i5 = 0, _iterator5 = _isArray5 ? _iterator5 : _iterator5[Symbol.iterator]();;) {\n        var _ref6;\n\n        if (_isArray5) {\n          if (_i5 >= _iterator5.length) break;\n          _ref6 = _iterator5[_i5++];\n        } else {\n          _i5 = _iterator5.next();\n          if (_i5.done) break;\n          _ref6 = _i5.value;\n        }\n\n        var _ref7 = _ref6,\n            isShown = _ref7.isShown,\n            points = _ref7.points,\n            name = _ref7.name;\n\n        if (isShown) {\n          tooltipValues.childNodes[2 * i].textContent = points[xIndex];\n          tooltipValues.childNodes[2 * i + 1].textContent = name;\n          i++;\n        }\n      }\n    }\n  }]);\n\n  return Tooltip;\n}();\n\nexport { Tooltip as default };\n//# sourceMappingURL=Tooltip.js.map","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { clearElement, commaJoin, getLowerSiblingDivisibleBy, divideInterval, throttle } from './utility';\nimport Timeline from './Timeline';\nimport Togglers from './Togglers';\nimport Tooltip from './Tooltip';\nvar SVG_XMLNS = 'http://www.w3.org/2000/svg';\n\nvar Chartogram =\n/*#__PURE__*/\nfunction () {\n  function Chartogram(rootNode, data) {\n    var _this = this;\n\n    var title = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'Title';\n    var props = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n    _classCallCheck(this, Chartogram);\n\n    _defineProperty(this, \"onResize\", function (event) {\n      _this.setState({\n        aspectRatio: _this.getCanvasAspectRatio()\n      }, false);\n    });\n\n    _defineProperty(this, \"onResizeThrottled\", throttle(this.onResize, 33));\n\n    _defineProperty(this, \"onToggle\", function (id) {\n      var y = _this.state.y.find(function (_) {\n        return _.id === id;\n      }); // Won't allow hiding all graphs.\n\n\n      if (y.isShown) {\n        var graphsShown = _this.state.y.filter(function (_) {\n          return _.isShown;\n        });\n\n        if (graphsShown.length === 1) {\n          return;\n        }\n      }\n\n      y.isShown = !y.isShown;\n\n      _this.setState({\n        y: _this.state.y\n      });\n\n      var _this$calculateMinMax = _this.calculateMinMaxY(_this.state.y),\n          minY = _this$calculateMinMax.minY,\n          maxY = _this$calculateMinMax.maxY,\n          minYGlobal = _this$calculateMinMax.minYGlobal,\n          maxYGlobal = _this$calculateMinMax.maxYGlobal;\n\n      _this.transitionState(minY, maxY, minYGlobal, maxYGlobal, _this.state.y.map(function (y) {\n        return y.isShown ? 1 : 0;\n      }));\n\n      return true;\n    });\n\n    _defineProperty(this, \"onChangeBounds\", function (from, to) {\n      var state = _this.createState(from, to);\n\n      var minY = state.minY;\n      var maxY = state.maxY;\n      delete state.minY;\n      delete state.maxY;\n\n      _this.setState(state, false);\n\n      _this.transitionState(minY, maxY);\n    });\n\n    _defineProperty(this, \"createPolylinePoints\", function (x, y) {\n      // return commaJoin(x, y)\n      return commaJoin(x.map(_this.fixSvgCoordinate), y.map(_this.fixSvgCoordinate));\n    });\n\n    _defineProperty(this, \"fixSvgCoordinate\", function (x) {\n      var precisionFactor = _this.props.precisionFactor;\n      return Math.round(x * precisionFactor) / precisionFactor;\n    });\n\n    _defineProperty(this, \"mapX\", function (x) {\n      var canvasWidth = _this.props.canvasWidth;\n      var _this$state = _this.state,\n          minX = _this$state.minX,\n          maxX = _this$state.maxX;\n      return (x - minX) / (maxX - minX) * canvasWidth;\n    });\n\n    _defineProperty(this, \"mapY\", function (y) {\n      var canvasWidth = _this.props.canvasWidth;\n      var _this$state2 = _this.state,\n          minY = _this$state2.minY,\n          maxY = _this$state2.maxY,\n          aspectRatio = _this$state2.aspectRatio;\n      return (y - minY) / (maxY - minY) * canvasWidth / aspectRatio;\n    });\n\n    _defineProperty(this, \"transitionStateTick\", function () {\n      var transitionEasing = _this.props.transitionEasing;\n      var _this$state3 = _this.state,\n          transitionStartedAt = _this$state3.transitionStartedAt,\n          transitionDuration = _this$state3.transitionDuration,\n          transitionUpdatesTimeline = _this$state3.transitionUpdatesTimeline,\n          graphOpacityFrom = _this$state3.graphOpacityFrom,\n          graphOpacityTo = _this$state3.graphOpacityTo,\n          minYFrom = _this$state3.minYFrom,\n          minYTo = _this$state3.minYTo,\n          maxYFrom = _this$state3.maxYFrom,\n          maxYTo = _this$state3.maxYTo,\n          minYGlobalFrom = _this$state3.minYGlobalFrom,\n          minYGlobalTo = _this$state3.minYGlobalTo,\n          maxYGlobalFrom = _this$state3.maxYGlobalFrom,\n          maxYGlobalTo = _this$state3.maxYGlobalTo;\n      var elapsed = Date.now() - transitionStartedAt;\n      var ratio = Math.min(elapsed / transitionDuration, 1);\n      ratio = EASING[transitionEasing](ratio);\n      var state = {};\n\n      if (minYTo !== undefined) {\n        state.minY = minYFrom + (minYTo - minYFrom) * ratio;\n        state.maxY = maxYFrom + (maxYTo - maxYFrom) * ratio;\n\n        if (ratio === 1) {\n          state.minYFrom = undefined;\n          state.minYTo = undefined;\n          state.maxYFrom = undefined;\n          state.maxYTo = undefined;\n        }\n      }\n\n      if (minYGlobalTo !== undefined) {\n        state.minYGlobal = minYGlobalFrom + (minYGlobalTo - minYGlobalFrom) * ratio;\n        state.maxYGlobal = maxYGlobalFrom + (maxYGlobalTo - maxYGlobalFrom) * ratio;\n\n        if (ratio === 1) {\n          state.minYGlobalFrom = undefined;\n          state.minYGlobalTo = undefined;\n          state.maxYGlobalFrom = undefined;\n          state.maxYGlobalTo = undefined;\n        }\n      }\n\n      if (graphOpacityTo !== undefined) {\n        state.graphOpacity = graphOpacityTo.map(function (_, i) {\n          return graphOpacityFrom[i] + (graphOpacityTo[i] - graphOpacityFrom[i]) * ratio;\n        });\n\n        if (ratio === 1) {\n          state.graphOpacityFrom = undefined;\n          state.graphOpacityTo = undefined;\n        }\n      }\n\n      _this.setState(state, transitionUpdatesTimeline);\n\n      if (ratio < 1) {\n        _this.transition = requestAnimationFrame(_this.transitionStateTick);\n      } else {\n        _this.transition = undefined;\n      }\n    });\n\n    this.props = _objectSpread({\n      title: title,\n      transitionDuration: 250,\n      transitionEasing: 'easeOutQuad',\n      gaugeTickMarksCount: 6,\n      timelineWindowSize: 40,\n      canvasWidth: 512,\n      precisionFactor: Math.pow(10, props.precision || 3),\n      months: MONTHS,\n      weekdays: WEEKDAYS\n    }, props);\n    this.rootNode = rootNode;\n    this.data = _objectSpread({}, data, {\n      minX: Math.min.apply(Math, _toConsumableArray(data.x.points)),\n      maxX: Math.max.apply(Math, _toConsumableArray(data.x.points)),\n      y: data.y.map(function (y) {\n        return _objectSpread({}, y, {\n          min: Math.min.apply(Math, _toConsumableArray(y.points)),\n          max: Math.max.apply(Math, _toConsumableArray(y.points))\n        });\n      })\n    });\n  }\n\n  _createClass(Chartogram, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.rootNode.classList.add('chartogram');\n      this.rootNode.innerHTML = \"\\n\\t\\t\\t\".concat(INITIAL_MARKUP.replace('{title}', this.props.title), \"\\n\\t\\t\\t\").concat(Timeline.INITIAL_MARKUP, \"\\n\\t\\t\\t\").concat(Togglers.INITIAL_MARKUP, \"\\n\\t\\t\");\n      this.tooltipContainer = this.rootNode.querySelector('.chartogram__plan');\n      this.canvas = this.rootNode.querySelector('.chartogram__canvas');\n      this.canvasWrapper = this.rootNode.querySelector('.chartogram__canvas-wrapper');\n      this.xAxis = this.rootNode.querySelector('.chartogram__x');\n      this.yAxis = this.rootNode.querySelector('.chartogram__y'); // Render will be called after `.componentDidMount()`.\n\n      this.state = this.getInitialState();\n      this.updateAspectRatio();\n      this.timeline = new Timeline(this.getTimelineProps());\n      this.timeline.componentDidMount();\n      this.togglers = new Togglers(this.getTogglersProps());\n      this.togglers.componentDidMount();\n      this.tooltip = new Tooltip(this.getTooltipProps());\n      this.tooltip.componentDidMount();\n      this.mountGridLines();\n      this.mountGauges();\n      this.mountGraphs(); // Add window resize event listener.\n\n      window.addEventListener('resize', this.onResizeThrottled);\n      this.render();\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.timeline.componentWillUnmount();\n      this.rootNode.classList.remove('chartogram');\n      clearElement(this.rootNode); // Remove window resize event listener.\n\n      window.removeEventListener('resize', this.onResizeThrottled);\n\n      if (this.transition) {\n        cancelAnimationFrame(this.transition);\n      }\n    }\n  }, {\n    key: \"getCanvasAspectRatio\",\n    value: function getCanvasAspectRatio() {\n      var canvasDimensions = this.canvas.getBoundingClientRect();\n      return canvasDimensions.width / canvasDimensions.height;\n    }\n  }, {\n    key: \"setState\",\n    value: function setState(newState) {\n      var renderTimeline = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n      if (newState.aspectRatio !== this.state.aspectRatio) {\n        this.updateAspectRatio(newState.aspectRatio);\n      }\n\n      this.state = _objectSpread({}, this.state, newState);\n      this.render();\n\n      if (renderTimeline) {\n        this.timeline.componentDidUpdate(this.getTimelineProps());\n      }\n\n      this.tooltip.componentDidUpdate(this.getTooltipProps());\n    }\n  }, {\n    key: \"getTimelineProps\",\n    value: function getTimelineProps() {\n      return {\n        rootNode: this.rootNode,\n        data: this.data,\n        canvasWidth: this.props.canvasWidth,\n        fixSvgCoordinate: this.fixSvgCoordinate,\n        createPolylinePoints: this.createPolylinePoints,\n        fromRatio: this.state.fromRatio,\n        toRatio: this.state.toRatio,\n        minY: this.state.minYGlobal,\n        maxY: this.state.maxYGlobal,\n        y: this.state.y,\n        graphOpacity: this.state.graphOpacity,\n        onChangeBounds: this.onChangeBounds\n      };\n    }\n  }, {\n    key: \"getTogglersProps\",\n    value: function getTogglersProps() {\n      return {\n        rootNode: this.rootNode,\n        data: this.data,\n        onToggle: this.onToggle\n      };\n    }\n  }, {\n    key: \"getTooltipProps\",\n    value: function getTooltipProps() {\n      return {\n        canvas: this.canvas,\n        container: this.tooltipContainer,\n        pointsContainer: this.canvasWrapper,\n        weekdays: this.props.weekdays,\n        months: this.props.months,\n        canvasWidth: this.props.canvasWidth,\n        aspectRatio: this.state.aspectRatio,\n        mapX: this.mapX,\n        fixSvgCoordinate: this.fixSvgCoordinate,\n        minX: this.state.minX,\n        maxX: this.state.maxX,\n        maxY: this.state.maxY,\n        xPoints: this.state.xPoints,\n        y: this.state.y\n      };\n    }\n  }, {\n    key: \"getInitialState\",\n    value: function getInitialState() {\n      var timelineWindowSize = this.props.timelineWindowSize;\n      var _this$data = this.data,\n          minX = _this$data.minX,\n          maxX = _this$data.maxX;\n      var fromIndex;\n\n      if (this.data.x.points.length > timelineWindowSize) {\n        fromIndex = this.data.x.points.length - timelineWindowSize;\n      } else {\n        fromIndex = 0;\n      }\n\n      var xFrom = this.data.x.points[fromIndex];\n      var fromRatio = (xFrom - minX) / (maxX - minX);\n      var toRatio = 1;\n      return _objectSpread({}, this.createState(fromRatio, toRatio), {\n        aspectRatio: this.getCanvasAspectRatio(),\n        graphOpacity: this.data.y.map(function (_) {\n          return 1;\n        })\n      });\n    }\n  }, {\n    key: \"createState\",\n    value: function createState(fromRatio, toRatio) {\n      var _this2 = this;\n\n      var x = this.data.x;\n      var minX = this.data.minX + fromRatio * (this.data.maxX - this.data.minX);\n      var maxX = this.data.minX + toRatio * (this.data.maxX - this.data.minX);\n      var fromIndex;\n\n      if (minX === this.data.minX) {\n        fromIndex = 0;\n      } else {\n        fromIndex = x.points.findIndex(function (x) {\n          return x > minX;\n        }) - 1;\n      }\n\n      var toIndex;\n\n      if (maxX === this.data.maxX) {\n        toIndex = x.points.length - 1;\n      } else {\n        toIndex = x.points.findIndex(function (x) {\n          return x > maxX;\n        });\n      }\n\n      var xPoints = x.points.slice(fromIndex, toIndex + 1);\n      var xGraphPoints = xPoints.slice(); // Create X graph points.\n\n      if (xPoints.length >= 2) {\n        if (x.points[fromIndex] !== minX) {\n          xGraphPoints[0] = minX;\n        }\n\n        if (x.points[toIndex] !== maxX) {\n          xGraphPoints[xGraphPoints.length - 1] = maxX;\n        }\n      }\n\n      var y = this.data.y.map(function (y, i) {\n        var points = _this2.data.y[i].points.slice(fromIndex, toIndex + 1);\n\n        var graphPoints = points.slice();\n\n        if (xPoints.length >= 2) {\n          if (x.points[fromIndex] !== minX) {\n            var beforeStartY = _this2.data.y[i].points[fromIndex];\n            var startY = _this2.data.y[i].points[fromIndex + 1];\n            var fromXExcludedTickRatio = (minX - _this2.data.x.points[fromIndex]) / (_this2.data.x.points[fromIndex + 1] - _this2.data.x.points[fromIndex]);\n            var startPoint = beforeStartY + (startY - beforeStartY) * fromXExcludedTickRatio;\n            graphPoints[0] = startPoint;\n          }\n\n          if (x.points[toIndex] !== maxX) {\n            var afterEndY = _this2.data.y[i].points[toIndex];\n            var endY = _this2.data.y[i].points[toIndex - 1];\n            var toXIncludedTickRatio = (maxX - _this2.data.x.points[toIndex - 1]) / (_this2.data.x.points[toIndex] - _this2.data.x.points[toIndex - 1]);\n            var endPoint = endY + (afterEndY - endY) * toXIncludedTickRatio;\n            graphPoints[graphPoints.length - 1] = endPoint;\n          }\n        }\n\n        return _objectSpread({}, _this2.data.y[i], _this2.state ? _this2.state.y[i] : {\n          isShown: true\n        }, {\n          points: points,\n          graphPoints: graphPoints,\n          // Min Y is always 0 by design.\n          min: 0,\n          // min: Math.min(...graphPoints),\n          max: Math.max.apply(Math, _toConsumableArray(graphPoints))\n        });\n      });\n      return _objectSpread({\n        minX: minX,\n        maxX: maxX,\n        fromIndex: fromIndex,\n        toIndex: toIndex,\n        fromRatio: fromRatio,\n        toRatio: toRatio,\n        xPoints: xPoints,\n        xGraphPoints: xGraphPoints\n      }, this.calculateMinMaxY(y), {\n        y: y\n      });\n    }\n  }, {\n    key: \"calculateMinMaxY\",\n    value: function calculateMinMaxY(y) {\n      // Calculate visible min/max Y for the graphs being shown.\n      var minY = Infinity;\n      var maxY = -Infinity;\n\n      for (var _iterator = y, _isArray = Array.isArray(_iterator), _i = 0, _iterator = _isArray ? _iterator : _iterator[Symbol.iterator]();;) {\n        var _ref;\n\n        if (_isArray) {\n          if (_i >= _iterator.length) break;\n          _ref = _iterator[_i++];\n        } else {\n          _i = _iterator.next();\n          if (_i.done) break;\n          _ref = _i.value;\n        }\n\n        var _y = _ref;\n\n        if (_y.isShown) {\n          minY = Math.min(minY, _y.min);\n          maxY = Math.max(maxY, _y.max);\n        }\n      } // Calculate global min/max Y for the graphs being shown.\n\n\n      var minYGlobal = Infinity;\n      var maxYGlobal = -Infinity;\n\n      var _loop = function _loop() {\n        if (_isArray2) {\n          if (_i2 >= _iterator2.length) return \"break\";\n          _ref2 = _iterator2[_i2++];\n        } else {\n          _i2 = _iterator2.next();\n          if (_i2.done) return \"break\";\n          _ref2 = _i2.value;\n        }\n\n        var _y = _ref2;\n        var isShown = y.find(function (_) {\n          return _.id === _y.id;\n        }).isShown;\n\n        if (isShown) {\n          minYGlobal = Math.min(minYGlobal, _y.min);\n          maxYGlobal = Math.max(maxYGlobal, _y.max);\n        }\n      };\n\n      for (var _iterator2 = this.data.y, _isArray2 = Array.isArray(_iterator2), _i2 = 0, _iterator2 = _isArray2 ? _iterator2 : _iterator2[Symbol.iterator]();;) {\n        var _ref2;\n\n        var _ret = _loop();\n\n        if (_ret === \"break\") break;\n      } // Min Y is always 0 by design.\n\n\n      minYGlobal = 0;\n      return {\n        minY: minY,\n        maxY: maxY,\n        minYGlobal: minYGlobal,\n        maxYGlobal: maxYGlobal\n      };\n    }\n  }, {\n    key: \"updateAspectRatio\",\n    value: function updateAspectRatio() {\n      var aspectRatio = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.state.aspectRatio;\n      var canvasWidth = this.props.canvasWidth; // Set canvas `viewBox`.\n\n      this.canvas.setAttribute('viewBox', \"0 0 \".concat(canvasWidth, \" \").concat(this.fixSvgCoordinate(canvasWidth / aspectRatio)));\n    }\n  }, {\n    key: \"updateGridLine\",\n    value: function updateGridLine(i, y) {\n      var maxY = this.state.maxY;\n      var line = this.gridLines[i];\n      line.setAttribute('y1', this.fixSvgCoordinate(this.mapY(maxY - y)));\n      line.setAttribute('y2', this.fixSvgCoordinate(this.mapY(maxY - y)));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var gaugeTickMarksCount = this.props.gaugeTickMarksCount;\n      var _this$state4 = this.state,\n          y = _this$state4.y,\n          minX = _this$state4.minX,\n          maxX = _this$state4.maxX,\n          minY = _this$state4.minY,\n          maxY = _this$state4.maxY,\n          graphOpacity = _this$state4.graphOpacity; // Calculate grid lines' coordinates.\n\n      var minY_ = minY;\n      var maxY_ = getLowerSiblingDivisibleBy(maxY, 10);\n      var yAxisScale = (maxY - minY) / (maxY_ - minY_);\n      var yAxisTickMarks = divideInterval(minY_, maxY_, gaugeTickMarksCount); // Update grid lines.\n\n      yAxisTickMarks.forEach(function (y, i) {\n        return _this3.updateGridLine(i, y);\n      }); // Update graphs.\n\n      var i = 0;\n\n      while (i < y.length) {\n        var _y$i = y[i],\n            isShown = _y$i.isShown,\n            graphPoints = _y$i.graphPoints,\n            color = _y$i.color;\n        var opacity = graphOpacity[i]; // Update graph.\n\n        if (isShown || opacity > 0) {\n          if (this.graphs[i]) {\n            this.updateGraph(i, graphPoints, opacity);\n          } else {\n            this.mountGraph(i, graphPoints, color, opacity);\n          }\n        } else if (this.graphs[i]) {\n          this.unmountGraph(i);\n        }\n\n        i++;\n      } // Update gauges.\n\n\n      this.updateGauges(minX, maxX, minY_, maxY_, yAxisScale);\n    }\n  }, {\n    key: \"renderGraph\",\n    value: function renderGraph(graphPoints, color) {\n      var opacity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n      var graph = document.createElementNS(SVG_XMLNS, 'polyline');\n      graph.setAttribute('stroke', color);\n      graph.classList.add('chartogram__graph');\n      this.updateGraph(graph, graphPoints, opacity);\n      return graph;\n    }\n  }, {\n    key: \"mountGridLines\",\n    value: function mountGridLines() {\n      var gaugeTickMarksCount = this.props.gaugeTickMarksCount;\n      this.gridLines = [];\n      var i = 0;\n\n      while (i < gaugeTickMarksCount) {\n        var line = this.renderGridLine(0);\n        this.gridLines.push(line);\n        this.canvas.appendChild(line);\n        i++;\n      }\n    }\n  }, {\n    key: \"mountGraphs\",\n    value: function mountGraphs() {\n      var _this4 = this;\n\n      this.graphs = [];\n      var y = this.state.y;\n      y.forEach(function (_ref3, i) {\n        var graphPoints = _ref3.graphPoints,\n            color = _ref3.color;\n\n        _this4.mountGraph(i, graphPoints, color);\n      });\n    }\n  }, {\n    key: \"mountGraph\",\n    value: function mountGraph(i, graphPoints, color, opacity) {\n      var graph = this.renderGraph(graphPoints, color, opacity);\n      this.graphs[i] = graph;\n      this.canvas.appendChild(graph);\n    }\n  }, {\n    key: \"unmountGraph\",\n    value: function unmountGraph(i) {\n      this.canvas.removeChild(this.graphs[i]);\n      this.graphs[i] = undefined;\n    }\n  }, {\n    key: \"updateGraph\",\n    value: function updateGraph(graph, graphPoints, opacity) {\n      var _this5 = this;\n\n      var _this$state5 = this.state,\n          xGraphPoints = _this$state5.xGraphPoints,\n          maxY = _this$state5.maxY;\n\n      if (typeof graph === 'number') {\n        graph = this.graphs[graph];\n      }\n\n      graph.setAttribute('points', this.createPolylinePoints(xGraphPoints.map(this.mapX), graphPoints.map(function (y) {\n        return _this5.mapY(maxY - y);\n      })).join(' '));\n\n      if (opacity !== 1) {\n        graph.style.opacity = opacity;\n      }\n    }\n  }, {\n    key: \"transitionState\",\n    value: function transitionState(minY, maxY, minYGlobal, maxYGlobal, graphOpacity) {\n      var maxTransitionDuration = this.props.transitionDuration;\n\n      if (this.transition) {\n        cancelAnimationFrame(this.transition);\n        this.transitionStateTick();\n        cancelAnimationFrame(this.transition);\n      }\n\n      var transitionDuration = maxTransitionDuration;\n\n      if (minY !== undefined) {\n        var heightBefore = this.state.maxY - this.state.minY;\n        var deltaMaxY = Math.abs(maxY - this.state.maxY) / heightBefore;\n        var deltaMinY = Math.abs(minY - this.state.minY) / heightBefore;\n        var deltaY = Math.max(deltaMinY, deltaMaxY);\n        transitionDuration = maxTransitionDuration * Math.max(0.2, Math.min(deltaY, 0.5) * 2);\n      }\n\n      var state = {\n        transitionStartedAt: Date.now(),\n        transitionDuration: transitionDuration\n      };\n\n      if (minY !== undefined) {\n        state.minYFrom = this.state.minY;\n        state.maxYFrom = this.state.maxY;\n        state.minYTo = minY;\n        state.maxYTo = maxY;\n      }\n\n      if (graphOpacity !== undefined) {\n        state.graphOpacityFrom = this.state.graphOpacity;\n        state.graphOpacityTo = graphOpacity;\n      }\n\n      if (minYGlobal !== undefined) {\n        state.minYGlobalFrom = this.state.minYGlobal;\n        state.maxYGlobalFrom = this.state.maxYGlobal;\n        state.minYGlobalTo = minYGlobal;\n        state.maxYGlobalTo = maxYGlobal;\n      }\n\n      var shouldUpdateTimeline = graphOpacity !== undefined || minYGlobal !== undefined;\n      state.transitionUpdatesTimeline = shouldUpdateTimeline;\n      this.setState(state, shouldUpdateTimeline); // Place the following in a `setState()` callback in case of React.\n\n      this.transition = requestAnimationFrame(this.transitionStateTick);\n    }\n  }, {\n    key: \"renderGridLine\",\n    value: function renderGridLine(y) {\n      var _this$state6 = this.state,\n          minX = _this$state6.minX,\n          maxX = _this$state6.maxX,\n          minY = _this$state6.minY,\n          maxY = _this$state6.maxY;\n      var line = document.createElementNS(SVG_XMLNS, 'line');\n      line.classList.add('chartogram__grid-line');\n      line.setAttribute('x1', this.fixSvgCoordinate(this.mapX(minX)));\n      line.setAttribute('x2', this.fixSvgCoordinate(this.mapX(maxX)));\n      line.setAttribute('y1', this.fixSvgCoordinate(this.mapY(maxY - y)));\n      line.setAttribute('y2', this.fixSvgCoordinate(this.mapY(maxY - y)));\n      return line;\n    }\n  }, {\n    key: \"mountGauges\",\n    value: function mountGauges() {\n      var gaugeTickMarksCount = this.props.gaugeTickMarksCount;\n      var i = 0;\n\n      while (i < gaugeTickMarksCount) {\n        this.xAxis.appendChild(document.createElement('div'));\n        this.yAxis.appendChild(document.createElement('div'));\n        i++;\n      }\n    }\n  }, {\n    key: \"updateGauges\",\n    value: function updateGauges(minX, maxX, minY, maxY, yAxisScale) {\n      var _this$props = this.props,\n          months = _this$props.months,\n          gaugeTickMarksCount = _this$props.gaugeTickMarksCount;\n      this.updateGauge(this.xAxis, minX, maxX, gaugeTickMarksCount, function (timestamp) {\n        var date = new Date(timestamp);\n        return \"\".concat(months[date.getMonth()], \" \").concat(date.getDate());\n      });\n      this.updateGauge(this.yAxis, minY, maxY, gaugeTickMarksCount);\n      this.yAxis.style.height = \"\".concat(100 / yAxisScale, \"%\");\n    }\n  }, {\n    key: \"updateGauge\",\n    value: function updateGauge(gauge, min, max, tickMarksCount, transform) {\n      var i = 0;\n\n      while (i < tickMarksCount) {\n        var tickMark = gauge.childNodes[i];\n        var value = min + i * (max - min) / (tickMarksCount - 1);\n\n        if (transform) {\n          value = transform(value);\n        }\n\n        tickMark.textContent = value;\n        i++;\n      }\n    }\n  }]);\n\n  return Chartogram;\n}();\n\nexport { Chartogram as default };\nvar MONTHS = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\nvar WEEKDAYS = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\nvar INITIAL_MARKUP = \"\\n\\t<header class=\\\"chartogram__header\\\">\\n\\t\\t<h1 class=\\\"chartogram__title\\\">{title}</h1>\\n\\t</header>\\n\\t<div class=\\\"chartogram__plan-with-axes\\\">\\n\\t\\t<div class=\\\"chartogram__plan\\\">\\n\\t\\t\\t<div class=\\\"chartogram__top-border\\\"></div>\\n\\t\\t\\t<div class=\\\"chartogram__canvas-wrapper\\\">\\n\\t\\t\\t\\t<svg class=\\\"chartogram__canvas\\\"></svg>\\n\\t\\t\\t\\t<div class=\\\"chartogram__x\\\"></div>\\n\\t\\t\\t\\t<div class=\\\"chartogram__y-wrapper\\\">\\n\\t\\t\\t\\t\\t<div class=\\\"chartogram__y\\\"></div>\\n\\t\\t\\t\\t</div>\\n\\t\\t\\t</div>\\n\\t\\t</div>\\n\\t</div>\\n\"; // https://gist.github.com/gre/1650294\n\nvar EASING = {\n  linear: function linear(t) {\n    return t;\n  },\n  easeInOutSin: function easeInOutSin(t) {\n    return (1 + Math.sin(Math.PI * t - Math.PI / 2)) / 2;\n  },\n  easeInOutQuad: function easeInOutQuad(t) {\n    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n  },\n  easeInOutCubic: function easeInOutCubic(t) {\n    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n  },\n  easeOutCubic: function easeOutCubic(t) {\n    return --t * t * t + 1;\n  },\n  easeOutQuad: function easeOutQuad(t) {\n    return t * (2 - t);\n  }\n};\n//# sourceMappingURL=Chartogram.js.map","import Chartogram from './Chartogram';\nexport default function chartogram(rootNode, data, title, options) {\n  var chartogram = new Chartogram(rootNode, data, title, options);\n  chartogram.componentDidMount();\n  return function () {\n    chartogram.componentWillUnmount();\n  };\n}\n//# sourceMappingURL=index.js.map"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","_arrayWithoutHoles","iter","Symbol","iterator","Object","prototype","toString","call","from","_iterableToArray","TypeError","_nonIterableSpread","clearElement","element","firstChild","removeChild","throttle","func","interval","timeout","executedAt","scheduled","undefined","Date","now","remaining","clearTimeout","setTimeout","setUpDrag","onDragStart","onDrag","onTouchMove","event","changedTouches","clientX","clientY","onPointerMove","onDragStop","window","removeEventListener","onTouchStart","touches","addEventListener","onPointerDown","_slicedToArray","_arrayWithHoles","_arr","_n","_d","_e","_s","_i","next","done","push","value","err","_iterableToArrayLimit","_nonIterableRest","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_defineProperty","obj","Timeline","_this","this","instance","Constructor","_classCallCheck","setState","aspectRatio","getCanvasAspectRatio","onResize","newState","state","updateAspectRatio","arguments","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","_objectSpread","render","x","_this$props","canvasWidth","data","minX","maxX","y","_this$props2","minY","maxY","side","timelineCoordinates","deltaX","handle","timelineWindowLeftHandle","timelineWindowRightHandle","handleWidth","parseFloat","getComputedStyle","timelineWindow","borderLeftWidth","timeline","getBoundingClientRect","timelineWindowCoordinates","left","width","ratio","Math","max","min","updateBounds","toRatio","fromRatio","innerX","timelineWindowDrag","timelineOverlayLeft","style","right","timelineOverlayRight","protoProps","staticProps","onChangeBounds","rootNode","querySelector","timelineCanvas","setUpTimelineWindowHandle","setUpTimelineWindow","onResizeThrottled","mountGraphs","_this$props3","fixSvgCoordinate","setAttribute","timelineCanvasDimensions","height","_this2","_this$props4","graphOpacity","_loop","_data$y$i","id","points","color","isShown","find","_","opacity","_simplifyGraph2","simplifyGraph","maxPoints","yMax","apply","threshold","_x","_y","slice","y0","abs","graphs","updateGraph","mountGraph","unmountGraph","graph","document","createElementNS","classList","add","_this3","_ref","renderGraph","appendChild","_this4","_this$props5","createPolylinePoints","map","mapX","mapY","join","to","setTimelineWindowLeft","setTimelineWindowRight","INITIAL_MARKUP","Togglers","name","toggler","createElement","xmlns","check","backgroundCircle","checkCircle","checkMark","createTextNode","onToggle","toggle","graphTogglers","_iterator","_isArray","_ref2","createGraphToggler","Tooltip","_onTrackStart","_onTrack","_onTrackStop","elementBounds","onTrack","onTrackStart","onTrackStop","top","onPointerEnter","setUpTouchMove","canvas","unmount","screenX","screenY","canvasDimensions","xIndex","xPoints","xPoint","xHigherIndex","findIndex","xLowerIndex","xLower","xHigher","tooltipForX","tooltip","mount","updateTooltip","line","pointsContainer","renderPoints","point","_iterator2","_isArray2","_i2","isLineRendered","mountLine","setAttributeNS","xRatio","j","yRatio","bottom","unlisten","setUpListener","container","renderTooltip","mountPoints","unmountPoints","unmountLine","renderLine","insertBefore","tooltipDate","tooltipValues","_iterator3","_isArray3","_i3","_ref3","_ref4","tooltipValue","tooltipName","parentNode","_iterator4","_isArray4","_i4","_ref5","updateTooltipDate","updateTooltipValues","updateTooltipPosition","updatePointPositions","updateLinePosition","_this$props6","tooltipShift","maxOverflow","tooltipWidth","overflow","date","_this$props7","weekdays","months","childNodes","textContent","getDay","getMonth","getDate","_iterator5","_isArray5","_i5","_ref6","_ref7","Chartogram","title","_this$calculateMinMax","calculateMinMaxY","minYGlobal","maxYGlobal","transitionState","createState","a","b","ai","precisionFactor","round","_this$state","_this$state2","transitionEasing","_this$state3","transitionStartedAt","transitionDuration","transitionUpdatesTimeline","graphOpacityFrom","graphOpacityTo","minYFrom","minYTo","maxYFrom","maxYTo","minYGlobalFrom","minYGlobalTo","maxYGlobalFrom","maxYGlobalTo","elapsed","EASING","transition","requestAnimationFrame","transitionStateTick","gaugeTickMarksCount","timelineWindowSize","pow","precision","MONTHS","WEEKDAYS","innerHTML","replace","tooltipContainer","canvasWrapper","xAxis","yAxis","getInitialState","getTimelineProps","componentDidMount","togglers","getTogglersProps","getTooltipProps","mountGridLines","mountGauges","componentWillUnmount","remove","cancelAnimationFrame","renderTimeline","componentDidUpdate","fromIndex","_this$data","toIndex","xGraphPoints","graphPoints","beforeStartY","startPoint","afterEndY","endY","endPoint","Infinity","gridLines","_this$state4","minY_","maxY_","n","divider","floor","getLowerSiblingDivisibleBy","yAxisScale","GAUGE_TICK_MARKS_COUNT","divideInterval","updateGridLine","_y$i","updateGauges","renderGridLine","_this5","_this$state5","maxTransitionDuration","heightBefore","deltaMaxY","deltaMinY","deltaY","shouldUpdateTimeline","_this$state6","updateGauge","timestamp","gauge","tickMarksCount","transform","tickMark","linear","t","easeInOutSin","sin","PI","easeInOutQuad","easeInOutCubic","easeOutCubic","easeOutQuad","options","chartogram"],"mappings":"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"}